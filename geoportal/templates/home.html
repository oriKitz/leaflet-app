{% extends "base.html" %}

{% block left_sidebar %}
<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#add-layer">
  New Layer
</button>
<div class="modal fade" id="add-layer" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Add Layer</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
                <form id="modal-layer-form" class="form">
                    <div class="form-group">
                        <label for="name" class="control-label">Name:</label>
                        <input class="form-control" id="name">
                    </div>
                    <div class="form-group row">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save layer</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% for layer in layers %}
<div class="row ml-2 mt-3">
    <label class="checkbox mr-3">
        <input type="checkbox" id="checkbox-{{ layer.id }}" onclick="toggleLayer({{ layer.id }})">
    </label>
    <p>{{ layer.name }}</p>
</div>
{% endfor %}
{% endblock left_sidebar %}

{% block content %}
<div id="myMap" class="mt-4"></div>

<div class="modal fade" id="add-point" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel">Add Point</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
                <form id="modal-form" method="post" action="" class="form">
                    <div class="form-group">
                        <label for="description" class="control-label">Description:</label>
                        <input class="form-control" id="description">
                    </div>
                    <div class="form-group">
                        <label for="layer">Select Layer:</label>
                        <select class="form-control" id="layer">
                            {% for layer in layers %}
                                <option id="layer.id">{{ layer.name }}, {{ layer.user.username }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-group row">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                        <button type="button" class="btn">Don't save to layer</button>
                        <button type="submit" id="submit" name="submit" class="btn btn-primary">Save changes</button>
                    </div>
                </form>
            </div>
            <!--<div class="modal-footer">-->
            <!--</div>-->
        </div>
    </div>
</div>
{% endblock content %}

{% block right_sidebar %}
<form class="form-inline my-2 my-lg-0">
    <input class="form-control mr-sm-2 mt-3 mb-2" type="search" placeholder="Search" aria-label="Search" id="queries_search" onkeyup="filterQueries()">
</form>
<div class="list-group">
{% for query in queries %}
        <button name="query-selector" class="list-group-item" id="{{ query.id }}">{{ query.query_name }}</button>
        <form class="form-popup form-container" id="params-form" name="{{ query.id }}">
        </form>
{% endfor %}
</div>
<nav aria-label="Page navigation">
</nav>
{% endblock right_sidebar %}

{% block fileend %}
<script src="/static/js/map.js"></script>
{% endblock fileend %}

